<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>放大镜</title>
<style>
	*{margin:0;padding:0;}
	#demo{position:relative;}
	#float-box{display:none;width:150px;height:150px;border:#ccc solid 1px;position:absolute;opacity:0.5;filter: alpha(opacity=50);background:#9F9;}
	#small-box {position:absolute;z-index:1;left:50px;top:50px;}
	#small-box img{width:400px;height:300px;}
	
	#big-box {width:300px;height:300px;z-index:1;position:absolute;left:500px;top:50px;display:none;overflow:hidden;}
	#big-box img{width:800px;height:600px;position:absolute;z-index:5;}
</style>
<script type="text/javascript">
	window.onload = function (){
		var objFloatBox = document.getElementById("float-box");
		var objSmallBox = document.getElementById("small-box");
		var objBox = document.getElementById("small-box");
		var objBigBox = document.getElementById("big-box");
		
		var objBigImg = document.getElementById("big-box").getElementsByTagName("img")[0];
		
		objSmallBox.onmouseover = function(){
			objFloatBox.style.display = "block";
			objBigBox.style.display = "block";
			}
			
		objSmallBox.onmouseout = function(){
			objFloatBox.style.display = "none";
			objBigBox.style.display = "none";
			}
		
		objSmallBox.onmousemove = function(ev){
			var _event = ev;
			
			var left = _event.clientX - objSmallBox.offsetLeft - (objFloatBox.offsetWidth/2);
			var top = _event.clientY - objSmallBox.offsetTop - (objFloatBox.offsetHeight/2);
			
			if(left<0){
				left=0;
				}
			else if(left>(objSmallBox.offsetWidth-objFloatBox.offsetWidth)){
				left = objSmallBox.offsetWidth-objFloatBox.offsetWidth;
				}
			if(top<0){
				top = 0;
				}
			else if(top>(objSmallBox.offsetHeight-objFloatBox.offsetHeight)){
				top = objSmallBox.offsetHeight-objFloatBox.offsetHeight;
				}
			
			objFloatBox.style.left = left +"px";
			objFloatBox.style.top = top +"px";
			
			objBigImg.style.left = -(left*2) + "px";
			objBigImg.style.top = -(top*2) + "px";
			}
		}
</script>
</head>

<body>
<div id="demo">
	<div id="small-box">
    	<div id="float-box"></div>
        <img src="http://oenn5yn29.bkt.clouddn.com/img4.jpg"/>
    </div>
    <div id="big-box">
    	<img src="http://oenn5yn29.bkt.clouddn.com/img4.jpg">
    </div>
</div>
</body>
</html>
